<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>拖拽特效</title>
        <style>
            #div1 {width: 20px;height: 30px;background: red;position: absolute;}
        </style>
        <script>
            window.onload=function ()
            {
                var oDiv=document.getElementById('div1');

                var disX=0;
                var disY=0;

                oDiv.onmousedown=function (ev)
                {
                    var oEvent=ev||event;

                    disX=oEvent.clientX-oDiv.offsetLeft;
                    disY=oEvent.clientY-oDiv.offsetTop;

                    document.onmousemove=function(ev)
                {
                    var oEvent=ev||event;
                    var i=oEvent.clientX-disX;
                    var j=oEvent.clientY-disY;

                    oDiv.style.left=i+'px';
                    oDiv.style.top=j+'px';

                    if(i<0)
                    {
                        i=0;
                    }
                    else if(i>document.documentElement.clientWidth-oDiv.offsetWidth)
                    {
                        i=document.documentElement.clientWidth-oDiv.offsetWidth;
                    }
                    if(j<0)
                    {
                        j=0;
                    }
                    else if(j>document.documentElement.clientHeight-oDiv.offsetHeight)
                    {j=document.documentElement.clientHeight-oDiv.offsetHeight;}
                };

                    document.onmouseup=function(ev)
                    {
                        document.onmousemove=null;
                        document.onmouseup=null;
                    };
                    return false;
                };
            };
        </Script>
    </head>

    <body>
        <div id="div1"></div>
    </body>

</html>